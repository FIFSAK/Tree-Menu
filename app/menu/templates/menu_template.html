{% for item in menu_items %}
    <li class="menu-item{% if item.is_active %} active{% endif %}{% if item.children %} has-children{% endif %}{% if item.should_expand %} expand{% endif %}"
        data-has-children="{% if item.children %}true{% else %}false{% endif %}">
        <a href="{{ item.url }}">{{ item.name }}</a>
        {% if item.children %}
            <ul class="sub-menu">
                {% include "menu_template.html" with menu_items=item.children %}
            </ul>
        {% endif %}
    </li>
{% endfor %}